const CATEGORIES = {
  "‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (Home)": {
    icon: "üè°",
    tools: [
      {
        name: "‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ Capsule OS",
        icon: "üí°",
        content: "üí° ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏ß‡πá‡∏ö ‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î BCG Model"
      }
    ]
  },
  "‡∏ï‡∏•‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢ (Market Place)": {
    icon: "üì¶",
    tools: [
      {
        name: "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏ï‡∏•‡∏≤‡∏î‡∏Å‡∏•‡∏≤‡∏á",
        icon: "üõí",
        content: "üõí ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏•‡∏≤‡∏î‡∏Å‡∏•‡∏≤‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤..."
      }
    ]
  },
  "‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏∑‡∏ä (Planting Guide)": {
    icon: "üå±",
    tools: [
      {
        name: "‡∏ú‡∏±‡∏Å‡∏™‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡∏ß",
        image: "https://www.thaihealth.or.th/data/content/34432/cms/thaihealth_c_bdeghjrt1359.jpg",
        content: "ü•¨ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏•‡∏π‡∏Å‡∏ú‡∏±‡∏Å‡∏™‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡∏ß‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô"
      },
      {
        name: "‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÑ‡∏ó‡∏¢",
        image: "https://www.salika.co/wp-content/uploads/2020/10/thai-herb-food-spices.jpg",
        content: "üåø ‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏•‡∏π‡∏Å‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÑ‡∏ó‡∏¢ ‡πÄ‡∏ä‡πà‡∏ô ‡πÇ‡∏´‡∏£‡∏∞‡∏û‡∏≤ ‡∏ï‡∏∞‡πÑ‡∏Ñ‡∏£‡πâ"
      },
      {
        name: "‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏ô",
        image: "https://static.thairath.co.th/media/dFQROr7oWzulq5Fa4VwEH2sPQgYkzDJt267Cud7ypnjOBdRDVNVyd6bT3lmgtgHGOC8.jpg",
        content: "üçç ‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏•‡∏π‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏ô ‡πÄ‡∏ä‡πà‡∏ô ‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á ‡∏Å‡∏•‡πâ‡∏ß‡∏¢ ‡∏•‡∏≥‡πÑ‡∏¢"
      },
      {
        name: "‡∏û‡∏∑‡∏ä‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û",
        image: "https://www.chaiyofarm.co.th/storage/app/uploads/public/65c/0b8/6d1/65c0b86d10d86651530296.jpg",
        content: "üå± ‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏∑‡∏ä‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û ‡πÄ‡∏ä‡πà‡∏ô ‡∏ü‡πâ‡∏≤‡∏ó‡∏∞‡∏•‡∏≤‡∏¢‡πÇ‡∏à‡∏£"
      }
    ]
  },
  "‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£ (Farming Techniques)": {
    icon: "üöú",
    tools: [
      {
        name: "‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏∑‡∏≠‡∏á",
        image: "https://aaaplc.com/wp-content/uploads/2025/01/3563.jpg",
        content: "üèôÔ∏è ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏∑‡∏ä‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î ‡πÄ‡∏ä‡πà‡∏ô ‡∏î‡∏≤‡∏î‡∏ü‡πâ‡∏≤"
      },
      {
        name: "‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á",
        image: "https://www.kasetsanjorn.com/wp-content/uploads/2021/05/19.4.64-%E0%B9%80%E0%B8%81%E0%B8%A9%E0%B8%95%E0%B8%A3%E0%B9%81%E0%B8%99%E0%B8%A7%E0%B8%95%E0%B8%B1%E0%B9%89%E0%B8%87.jpg",
        content: "üåá ‡∏£‡∏∞‡∏ö‡∏ö‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡πÉ‡∏ô‡πÅ‡∏ô‡∏ß‡∏î‡∏¥‡πà‡∏á"
      },
      {
        name: "Hydroponics",
        image: "https://static.scientificamerican.com/sciam/cache/file/72754C85-5CD5-4288-B37E300EF6C2D567_source.jpg?w=1200",
        content: "üíß ‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏∑‡∏ä‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏î‡∏¥‡∏ô (Hydroponics)"
      },
      {
        name: "Aquaponics",
        image: "https://www.renovablesverdes.com/wp-content/uploads/2020/07/Acuaponia.jpg",
        content: "üêü ‡∏Å‡∏≤‡∏£‡∏ú‡∏™‡∏°‡∏ú‡∏™‡∏≤‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏∑‡∏ä‡∏Å‡∏±‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏õ‡∏•‡∏≤ (Aquaponics)"
      }
    ]
  },
  "‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï (Processing & Value Adding)": {
    icon: "üè≠",
    tools: [
      {
        name: "‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï",
        image: "https://www.ditp.go.th/wp-content/uploads/2024/12/headline-pic.jpeg",
        content: "üè≠ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤"
      },
      {
        name: "‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤",
        image: "https://baansomtum.com/wp-content/uploads/which-fruits-vegetables-to-keep-in-the-fridge-baan-somtum-2.jpg",
        content: "üì¶ ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡πÉ‡∏´‡πâ‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà"
      },
      {
        name: "‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤",
        image: "https://www.tidlor.com/tidlor/media/tidlor-image/article/5-ideas-for-fruit-processing/processing-ideas.webp",
        content: "üí∞ ‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°"
      }
    ]
  },
  "‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏®‡∏©‡∏ß‡∏±‡∏™‡∏î‡∏∏‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏¥‡πâ‡∏á (Waste Management)": {
    icon: "‚ôªÔ∏è",
    tools: [
      {
        name: "‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏õ‡∏∏‡πã‡∏¢‡∏´‡∏°‡∏±‡∏Å",
        image: "https://s359.kapook.com/r/600/auto/pagebuilder/6fa365b1-443f-4517-b8c1-8aa361ad2e9a.jpg",
        content: "üåø ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏®‡∏©‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏∏‡πã‡∏¢‡∏´‡∏°‡∏±‡∏Å"
      },
      {
        name: "‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï‡πÑ‡∏ö‡πÇ‡∏≠‡πÅ‡∏Å‡πä‡∏™",
        image: "https://editverse.com/wp-content/uploads/2024/10/biogas-production-1024x585.jpg",
        content: "üî• ‡∏ú‡∏•‡∏¥‡∏ï‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå"
      },
      {
        name: "‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏ß‡∏±‡∏™‡∏î‡∏∏‡πÄ‡∏Å‡∏©‡∏ï‡∏£",
        image: "https://www.tcdcmaterial.com/uploads/material/MI01016-02/images/65702ad5ea9d8_P1057319.jpg",
        content: "‚ôªÔ∏è ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏ß‡∏±‡∏™‡∏î‡∏∏‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ü‡∏≤‡∏£‡πå‡∏°"
      }
    ]
  },
  "BCG Innovation Zone": {
    icon: "üß™",
    tools: [
      {
        name: "‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢",
        icon: "üìñ",
        content: "üìñ ‡∏≠‡πà‡∏≤‡∏ô‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏î‡πâ‡∏≤‡∏ô BCG ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î"
      },
      {
        name: "‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏° BCG",
        image: "https://www.salika.co/wp-content/uploads/2022/04/bgc7.webp",
        content: "üß† ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏™‡∏°‡∏±‡∏¢‡πÉ‡∏´‡∏°‡πà"
      },
      {
        name: "‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô",
        icon: "üèòÔ∏è",
        content: "üèòÔ∏è ‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô"
      }
    ]
  },
  "‡∏ä‡∏∏‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ & ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î (Resources)": {
    icon: "üìö",
    tools: [
      {
        name: "‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠ PDF",
        icon: "üìÑ",
        content: "üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£"
      },
      {
        name: "‡∏Ñ‡∏•‡∏¥‡∏õ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏™‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å",
        icon: "üé¨",
        content: "üé¨ ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏•‡∏π‡∏Å‡∏û‡∏∑‡∏ä‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡∏ô‡∏¥‡∏î"
      },
      {
        name: "Infographic BCG",
        icon: "üñºÔ∏è",
        content: "üñºÔ∏è ‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î BCG Model ‡πÅ‡∏ö‡∏ö‡∏†‡∏≤‡∏û"
      }
    ]
  }
};

// (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ)
const categoryList = document.getElementById("categoryList");
const toolGrid = document.getElementById("toolGrid");
const toolOutput = document.getElementById("toolOutput");
const categoryTitle = document.getElementById("categoryTitle");

Object.keys(CATEGORIES).forEach(catName => {
  const btn = document.createElement("button");
  btn.innerText = `${CATEGORIES[catName].icon} ${catName}`;
  btn.onclick = () => renderCategory(catName, btn);
  categoryList.appendChild(btn);
});

function renderCategory(name, activeBtn) {
  document.querySelectorAll(".sidebar button").forEach(b => b.classList.remove("active"));
  activeBtn.classList.add("active");

  categoryTitle.innerText = `${CATEGORIES[name].icon} ${name}`;
  toolGrid.innerHTML = "";
  toolOutput.innerHTML = "";
  activeTools.innerHTML = ""; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

  CATEGORIES[name].tools.forEach((tool, i) => {
    const card = document.createElement("div");
    card.className = "card";

    if (tool.image) {
      const img = document.createElement("img");
      img.src = tool.image;
      card.appendChild(img);
    } else if (tool.icon) {
      const iconDiv = document.createElement("div");
      iconDiv.style = "font-size: 48px; text-align: center; padding: 30px;";
      iconDiv.innerText = tool.icon;
      card.appendChild(iconDiv);
    }

    const btn = document.createElement("button");
    btn.innerText = `‡πÄ‡∏õ‡∏¥‡∏î ${tool.name}`;
    btn.dataset.toolId = `${name}-${tool.name}`.replace(/\s/g, "_");

    btn.onclick = () => {
    const wasOpened = renderToolContent(name, tool); // true = ‡πÄ‡∏õ‡∏¥‡∏î, false = ‡∏õ‡∏¥‡∏î
    btn.innerText = `${wasOpened ? "‡∏õ‡∏¥‡∏î" : "‡πÄ‡∏õ‡∏¥‡∏î"} ${tool.name}`;
    };

    card.appendChild(btn);
    toolGrid.appendChild(card);
  });
}

let openedToolId = null; // ‡πÄ‡∏Å‡πá‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÑ‡∏´‡∏ô‡∏≠‡∏¢‡∏π‡πà

function renderToolContent(categoryName, tool) {
  const toolId = `${categoryName}-${tool.name}`.replace(/\s/g, "_");

  const existingSection = document.getElementById(toolId);
  if (existingSection) {
    existingSection.remove();
    return false;
  }

  const section = document.createElement("div");
  section.id = toolId;
  section.className = "card";
  section.style = "margin-top: 20px; padding: 20px;";

  const content = document.createElement("div");
  content.innerHTML = `<h3>${tool.name}</h3><p style="white-space: pre-wrap;">${tool.content}</p>`;
  section.appendChild(content);

  const subToolContainer = document.createElement("div");
  subToolContainer.id = `subtools-${toolId}`;
  subToolContainer.className = "grid";
  section.appendChild(subToolContainer);

  const addBtn = document.createElement("button");
  addBtn.innerText = "+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠";
  addBtn.onclick = () => {
    showAddToolForm(categoryName, tool.name);
  };
  section.appendChild(addBtn);

  activeTools.appendChild(section);

  // ‚úÖ ‡πÇ‡∏´‡∏•‡∏î subtools ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á tool ‡∏ô‡∏µ‡πâ
  loadSavedToolsForTool(toolId);

  return true;
}

function loadSavedToolsForTool(toolId) {
  const saved = JSON.parse(localStorage.getItem("tools")) || [];

  const subToolContainer = document.getElementById(`subtools-${toolId}`);
  if (!subToolContainer) return;

  // ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô
  subToolContainer.innerHTML = "";

  saved
    .filter(tool => tool.toolId === toolId)
    .forEach(({ img, name, content }) => {
      const newCard = document.createElement("div");
      newCard.className = "card";
      newCard.style = "width: 100%; margin: 10px 0; text-align: center;";

      if (img) {
        const image = document.createElement("img");
        image.src = img;
        image.style = "max-height: 200px; object-fit: cover;";
        newCard.appendChild(image);
      }

      const nameBtn = document.createElement("button");
      nameBtn.innerText = name;
      nameBtn.onclick = () => {
        const outputId = `output-${toolId}-${name}`;
        const existing = document.getElementById(outputId);

        if (existing) {
          existing.remove();
        } else {
          toolOutput.innerHTML = "";

          const output = document.createElement("div");
          output.className = "card";
          output.id = outputId;

          const contentDiv = document.createElement("div");
          contentDiv.style = "padding: 10px; white-space: pre-wrap;";
          contentDiv.textContent = content;

          output.appendChild(contentDiv);
          toolOutput.appendChild(output);
        }
      };
      newCard.appendChild(nameBtn);

      // üóëÔ∏è ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö
      const deleteBtn = document.createElement("button");
      deleteBtn.innerText = "üóëÔ∏è";
      deleteBtn.style = "margin-top: 10px; background-color: red; color: white;";
      deleteBtn.onclick = () => {
        if (confirm(`‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö "${name}" ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) {
          // ‡∏•‡∏ö‡∏à‡∏≤‡∏Å localStorage
          const updated = saved.filter(
            tool => !(tool.toolId === toolId && tool.name === name)
          );
          localStorage.setItem("tools", JSON.stringify(updated));

          // ‡∏•‡∏ö‡∏à‡∏≤‡∏Å DOM
          newCard.remove();

          // ‡∏•‡∏ö output (‡∏ñ‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏¢‡∏π‡πà)
          const output = document.getElementById(`output-${toolId}-${name}`);
          if (output) output.remove();
        }
      };
      newCard.appendChild(deleteBtn);

      subToolContainer.appendChild(newCard);
    });
}